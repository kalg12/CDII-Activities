<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      Diagnóstico Cultura Digital II - Habilidades digitales y pensamiento
      crítico
    </title>
    <style>
      :root {
        --bg: #0f172a;
        --card: #1e293b;
        --card2: #334155;
        --text: #0f172a;
        --muted: #64748b;
        --accent: #7c3aed;
        --accent2: #22d3ee;
        --danger: #ef4444;
        --ok: #22c55e;
        --border: rgba(51, 65, 85, 0.2);
        --shadow: 0 10px 30px rgba(15, 23, 42, 0.25);
        --radius: 16px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial,
          sans-serif;
        background: radial-gradient(
            1200px 600px at 10% -10%,
            rgba(34, 211, 238, 0.28),
            transparent 60%
          ),
          radial-gradient(
            900px 500px at 95% 10%,
            rgba(124, 58, 237, 0.22),
            transparent 55%
          ),
          radial-gradient(
            800px 450px at 50% 100%,
            rgba(239, 68, 68, 0.14),
            transparent 55%
          ),
          #eef2ff;
        color: var(--text);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      .wrap {
        width: min(980px, 100%);
        display: grid;
        gap: 18px;
      }

      header {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding: 18px 18px 0 18px;
      }
      .title {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .badge {
        background: linear-gradient(90deg, var(--accent), var(--accent2));
        color: #0f172a;
        font-weight: 800;
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 12px;
        letter-spacing: 0.4px;
      }
      h1 {
        margin: 0;
        font-size: 22px;
        line-height: 1.2;
      }
      p.sub {
        margin: 0;
        color: var(--muted);
        font-size: 14px;
        line-height: 1.45;
      }

      .card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.95),
          rgba(250, 246, 240, 0.95)
        );
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }

      .content {
        padding: 18px;
        display: grid;
        gap: 14px;
      }

      .grid {
        display: grid;
        gap: 12px;
        grid-template-columns: 1fr;
      }
      @media (min-width: 760px) {
        .grid.two {
          grid-template-columns: 1fr 1fr;
        }
        .grid.three {
          grid-template-columns: 1fr 1fr 1fr;
        }
      }

      label {
        font-size: 12px;
        color: var(--muted);
        display: block;
        margin-bottom: 6px;
      }

      input,
      select,
      textarea {
        width: 100%;
        padding: 12px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: rgba(255, 255, 255, 0.5);
        color: var(--text);
        outline: none;
        transition: 0.2s;
      }
      select {
        background: rgba(255, 255, 255, 0.8);
        color: var(--text);
        cursor: pointer;
      }
      select option {
        background: #ffffff;
        color: var(--text);
        padding: 8px;
      }
      input:focus,
      select:focus,
      textarea:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.2);
      }
      textarea {
        min-height: 110px;
        resize: vertical;
      }

      .sectionTitle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-top: 6px;
        padding-top: 10px;
        border-top: 1px dashed rgba(100, 116, 139, 0.3);
      }
      .sectionTitle h2 {
        margin: 0;
        font-size: 15px;
        letter-spacing: 0.2px;
      }
      .hint {
        margin: 0;
        color: var(--muted);
        font-size: 12px;
      }

      .q {
        background: rgba(15, 23, 42, 0.03);
        border: 1px solid rgba(100, 116, 139, 0.2);
        border-radius: 14px;
        padding: 12px;
        display: grid;
        gap: 10px;
      }
      .qHead {
        display: flex;
        gap: 10px;
        align-items: flex-start;
        justify-content: space-between;
      }
      .qTitle {
        margin: 0;
        font-size: 13px;
        line-height: 1.35;
        color: var(--text);
      }
      .pill {
        font-size: 11px;
        color: #0f172a;
        font-weight: 800;
        padding: 5px 9px;
        border-radius: 999px;
        background: rgba(34, 211, 238, 0.9);
        white-space: nowrap;
      }

      .options {
        display: grid;
        gap: 8px;
      }
      .opt {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        border-radius: 12px;
        border: 1px solid rgba(100, 116, 139, 0.25);
        background: rgba(255, 255, 255, 0.3);
        cursor: pointer;
        transition: 0.15s;
        user-select: none;
      }
      .opt:hover {
        border-color: rgba(124, 58, 237, 0.6);
        transform: translateY(-1px);
      }
      .opt input {
        width: auto;
      }
      .opt span {
        font-size: 13px;
        color: var(--text);
      }

      .row {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        justify-content: space-between;
        padding: 14px 18px;
        border-top: 1px solid var(--border);
        background: rgba(124, 58, 237, 0.08);
      }

      .btn {
        appearance: none;
        border: none;
        border-radius: 14px;
        padding: 11px 14px;
        font-weight: 800;
        cursor: pointer;
        color: #ffffff;
        background: linear-gradient(90deg, var(--accent), var(--accent2));
        transition: 0.15s;
      }
      .btn:hover {
        transform: translateY(-1px);
      }
      .btn:disabled {
        opacity: 0.55;
        cursor: not-allowed;
        transform: none;
      }

      .btnGhost {
        background: transparent;
        color: var(--text);
        border: 1px solid var(--border);
      }
      .btnGhost:hover {
        border-color: var(--accent);
      }

      .msg {
        font-size: 13px;
        color: var(--muted);
      }
      .err {
        color: var(--danger);
        font-weight: 700;
      }

      .result {
        padding: 18px;
        display: none;
        gap: 14px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.95),
          rgba(250, 246, 240, 0.95)
        );
      }
      .result.show {
        display: grid;
      }
      .summary {
        background: rgba(255, 255, 255, 0.5);
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 12px;
        display: grid;
        gap: 10px;
      }
      .kvs {
        display: grid;
        gap: 10px;
      }
      @media (min-width: 760px) {
        .kvs {
          grid-template-columns: 1fr 1fr;
        }
      }
      .kv {
        background: rgba(255, 255, 255, 0.6);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 10px;
      }
      .kv .k {
        font-size: 11px;
        color: var(--muted);
        margin-bottom: 4px;
      }
      .kv .v {
        font-size: 13px;
        color: var(--text);
        font-weight: 700;
        word-break: break-word;
      }
      .code {
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas,
          "Liberation Mono", monospace;
        background: rgba(255, 255, 255, 0.7);
        border: 1px dashed rgba(100, 116, 139, 0.35);
        border-radius: 14px;
        padding: 12px;
        font-size: 12.5px;
        line-height: 1.5;
        overflow: auto;
        white-space: pre-wrap;
        word-break: break-word;
      }
      .mini {
        font-size: 12px;
        color: var(--muted);
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <header>
          <div class="title">
            <span class="badge">Cultura Digital II</span>
            <h1>Diagnóstico: habilidades digitales y pensamiento crítico</h1>
          </div>
          <p class="sub">
            Completa la actividad. Al final se generará un código único de
            terminación y un texto listo para pegar en el foro.
          </p>
        </header>

        <div
          style="
            background: rgba(255, 255, 255, 0.4);
            border-left: 4px solid rgba(124, 58, 237, 0.8);
            padding: 14px;
            border-radius: 8px;
            margin: 0 18px;
          "
        >
          <p
            style="
              margin: 0;
              font-size: 13px;
              color: var(--text);
              line-height: 1.6;
            "
          >
            <strong>Objetivo de la actividad:</strong> Diagnosticar las
            habilidades digitales y el nivel de pensamiento crítico de los
            estudiantes mediante una encuesta interactiva, identificando su uso
            cotidiano de herramientas digitales, su forma de organizar
            información, su comprensión básica de datos y gráficas, su
            conciencia sobre el consumo energético y su postura ética, para
            orientar la planeación del semestre y promover una reflexión inicial
            sobre cómo la tecnología influye en su aprendizaje y toma de
            decisiones.
          </p>
        </div>

        <form id="form" class="content" autocomplete="off">
          <div class="grid three">
            <div>
              <label for="studentName">Nombre completo</label>
              <input
                id="studentName"
                name="studentName"
                type="text"
                placeholder="Ej. Juan Pérez López"
                maxlength="80"
                required
              />
            </div>

            <div>
              <label for="career">Carrera técnica</label>
              <select id="career" name="career" required></select>
            </div>

            <div>
              <label for="groupLetter">Grupo</label>
              <select id="groupLetter" name="groupLetter" required>
                <option value="" disabled selected>Selecciona A o B</option>
                <option value="A">A</option>
                <option value="B">B</option>
              </select>
            </div>
          </div>

          <div class="sectionTitle">
            <h2>Diagnóstico (selecciona una opción por pregunta)</h2>
            <p class="hint">
              Responde con honestidad. No hay respuestas “perfectas”.
            </p>
          </div>

          <div id="questions"></div>

          <div class="sectionTitle">
            <h2>Reflexión breve (para el foro)</h2>
            <p class="hint">
              ¿Cómo influye la tecnología en tu aprendizaje y en tus decisiones?
              Exprésate libremente.
            </p>
          </div>

          <div>
            <label for="reflection"
              >Escribe tu reflexión (máximo 80 palabras)</label
            >
            <textarea
              id="reflection"
              name="reflection"
              rows="5"
              placeholder="Ej. La tecnología me permite organizar mis tareas escolares de manera más eficiente. Sin embargo, también reconozco que si no verifico la información que encuentro en internet, puedo tomar decisiones equivocadas. Por eso considero importante desarrollar pensamiento crítico al usar herramientas digitales..."
            ></textarea>
            <p class="mini" id="wordCount">0 / 80 palabras</p>
          </div>

          <div class="row">
            <div class="msg" id="msg">
              Completa todas las preguntas y escribe una reflexión para
              continuar.
            </div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap">
              <button type="button" class="btn btnGhost" id="btnReset">
                Limpiar
              </button>
              <button type="submit" class="btn" id="btnFinish">
                Finalizar y generar código
              </button>
            </div>
          </div>
        </form>

        <div id="result" class="result">
          <div class="summary">
            <h2 style="margin: 0; font-size: 16px">
              ¡Listo! Copia y pega esto en el foro
            </h2>
            <p class="mini">
              El ID se genera con tu nombre + selección + tiempo + aleatorio
              (evita que todos entreguen lo mismo).
            </p>

            <div class="kvs" id="kvs"></div>

            <div>
              <div class="code" id="copyBlock"></div>
              <div
                style="
                  display: flex;
                  gap: 10px;
                  flex-wrap: wrap;
                  margin-top: 10px;
                "
              >
                <button class="btn" id="btnCopy" type="button">
                  Copiar texto
                </button>
                <button class="btn btnGhost" id="btnBack" type="button">
                  Regresar
                </button>
              </div>
              <p class="mini" id="copyMsg"></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      /**************************************************************
       * CONFIGURACIÓN RÁPIDA (EDITA ESTO)
       **************************************************************/
      const CAREERS = [
        "TÉCNICO EN ACUACULTURA",
        "TÉCNICO EN MECÁNICA NAVAL",
        "TÉCNICO EN PREPARACIÓN DE ALIMENTOS Y BEBIDAS",
        "TÉCNICO EN RECREACIONES ACUÁTICAS",
        "TÉCNICO EN REFRIGERACIÓN Y CLIMATIZACIÓN",
        "TÉCNICO LABORATORISTA AMBIENTAL",
        // Agrega o quita carreras aquí
      ];

      const DAILY_SEED = "CulturaDigital2-2026-S2"; // Cambia esto por periodo/generación para variar IDs.

      /**************************************************************
       * PREGUNTAS (diagnóstico)
       **************************************************************/
      const QUESTIONS = [
        {
          id: "q1",
          tag: "Uso digital",
          text: "¿Con qué frecuencia usas herramientas digitales para tareas escolares (Docs, Classroom, Drive, etc.)?",
          options: [
            "Casi nunca",
            "A veces",
            "Frecuentemente",
            "Todos los días",
          ],
        },
        {
          id: "q2",
          tag: "Organización",
          text: "Cuando guardas archivos escolares, ¿cómo los organizas normalmente?",
          options: [
            "Los dejo donde caigan",
            "Uso carpetas básicas",
            "Uso carpetas por materia/tema",
            "Uso carpetas + nombres claros + fechas",
          ],
        },
        {
          id: "q3",
          tag: "Datos y gráficas",
          text: "Si te dan una tabla de datos, ¿qué tan seguro te sientes interpretando una gráfica simple (barras o pastel)?",
          options: ["Nada seguro", "Poco seguro", "Seguro", "Muy seguro"],
        },
        {
          id: "q4",
          tag: "Energía",
          text: "¿Qué tan consciente eres del consumo energético al usar dispositivos (cargar, brillo, tiempo de pantalla, etc.)?",
          options: ["Nada", "Poco", "Algo", "Mucho"],
        },
        {
          id: "q5",
          tag: "Uso responsable",
          text: "¿Qué haces si encuentras información dudosa en internet para una tarea?",
          options: [
            "La uso tal cual",
            "La uso si suena lógica",
            "Comparo con otra fuente",
            "Verifico fuentes y autor antes de usarla",
          ],
        },
        {
          id: "q6",
          tag: "Ética",
          text: "Sobre el uso de tecnología/IA: ¿qué tan importante es citar fuentes y no copiar/pegar?",
          options: [
            "No es importante",
            "Poco importante",
            "Importante",
            "Muy importante",
          ],
        },
        {
          id: "q7",
          tag: "Evaluación de información",
          text: "Cuando encuentras información en internet, ¿cómo determinas si es confiable?",
          options: [
            "No lo verifico, confío en lo que encuentro",
            "Confío si aparece en varios sitios",
            "Verifico la fuente y el autor",
            "Comparo múltiples fuentes y evalúo la evidencia",
          ],
        },
        {
          id: "q8",
          tag: "Privacidad y seguridad",
          text: "¿Qué tan consciente eres de tu privacidad y seguridad al usar plataformas digitales?",
          options: [
            "No me preocupa",
            "Poco consciente",
            "Consciente, cuido mis datos",
            "Muy consciente, reviso configuraciones y políticas",
          ],
        },
        {
          id: "q9",
          tag: "Misinformación",
          text: "¿Cómo identificas si una noticia o video en redes sociales es falso o manipulado?",
          options: [
            "No lo pienso, solo comparto",
            "Confío en quién la comparte",
            "Intento verificar con otras fuentes",
            "Analizo la fuente, evidencia y contexto antes de creer",
          ],
        },
        {
          id: "q10",
          tag: "Comunicación digital",
          text: "¿Qué tan seguro te sientes comunicándote de manera clara y respetuosa en herramientas digitales (correo, chat, foros)?",
          options: [
            "Nada seguro",
            "Poco seguro",
            "Seguro",
            "Muy seguro, considero el contexto y tono",
          ],
        },
      ];

      /**************************************************************
       * UTILIDADES
       **************************************************************/
      function safeTrim(s) {
        return (s || "").trim().replace(/\s+/g, " ");
      }

      // Hash simple (FNV-1a) para huella/ID
      function fnv1a(str) {
        let h = 0x811c9dc5;
        for (let i = 0; i < str.length; i++) {
          h ^= str.charCodeAt(i);
          h =
            (h + ((h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24))) >>> 0;
        }
        return ("00000000" + h.toString(16)).slice(-8).toUpperCase();
      }

      function nowStamp() {
        const d = new Date();
        const pad = (n) => String(n).padStart(2, "0");
        return `${d.getFullYear()}${pad(d.getMonth() + 1)}${pad(
          d.getDate()
        )}-${pad(d.getHours())}${pad(d.getMinutes())}${pad(d.getSeconds())}`;
      }

      function friendlyDate() {
        const d = new Date();
        const months = [
          "Ene",
          "Feb",
          "Mar",
          "Abr",
          "May",
          "Jun",
          "Jul",
          "Ago",
          "Sep",
          "Oct",
          "Nov",
          "Dic",
        ];
        const pad = (n) => String(n).padStart(2, "0");
        return `${pad(d.getDate())}/${
          months[d.getMonth()]
        }/${d.getFullYear()} ${pad(d.getHours())}:${pad(d.getMinutes())}`;
      }

      function randomToken(len = 6) {
        const chars = "ABCDEFGHJKMNPQRSTUVWXYZ23456789"; // sin 0,1,I,O
        let out = "";
        crypto
          .getRandomValues(new Uint32Array(len))
          .forEach((n) => (out += chars[n % chars.length]));
        return out;
      }

      function requiredAnswered() {
        // todas las preguntas respondidas
        return QUESTIONS.every((q) =>
          document.querySelector(`input[name="${q.id}"]:checked`)
        );
      }

      /**************************************************************
       * RENDER
       **************************************************************/
      const careerSel = document.getElementById("career");
      const questionsDiv = document.getElementById("questions");
      const reflection = document.getElementById("reflection");
      const wordCount = document.getElementById("wordCount");
      const msg = document.getElementById("msg");

      function countWords(text) {
        const trimmed = safeTrim(text);
        if (!trimmed) return 0;
        return trimmed.split(/\s+/).length;
      }

      function initCareers() {
        careerSel.innerHTML = `<option value="" disabled selected>Selecciona tu carrera</option>`;
        CAREERS.forEach((c) => {
          const opt = document.createElement("option");
          opt.value = c;
          opt.textContent = c;
          careerSel.appendChild(opt);
        });
      }

      function initQuestions() {
        questionsDiv.innerHTML = "";
        QUESTIONS.forEach((q, idx) => {
          const box = document.createElement("div");
          box.className = "q";

          const head = document.createElement("div");
          head.className = "qHead";

          const title = document.createElement("p");
          title.className = "qTitle";
          title.textContent = `${idx + 1}. ${q.text}`;

          const pill = document.createElement("span");
          pill.className = "pill";
          pill.textContent = q.tag;

          head.appendChild(title);
          head.appendChild(pill);

          const opts = document.createElement("div");
          opts.className = "options";

          q.options.forEach((op, j) => {
            const lab = document.createElement("label");
            lab.className = "opt";

            const radio = document.createElement("input");
            radio.type = "radio";
            radio.name = q.id;
            radio.value = op;
            radio.required = true;

            const sp = document.createElement("span");
            sp.textContent = op;

            lab.appendChild(radio);
            lab.appendChild(sp);
            opts.appendChild(lab);
          });

          box.appendChild(head);
          box.appendChild(opts);
          questionsDiv.appendChild(box);
        });
      }

      function updateWordCount() {
        const words = countWords(reflection.value);
        wordCount.textContent = `${words} / 80 palabras`;
        if (words > 80) {
          wordCount.style.color = "var(--danger)";
          wordCount.style.fontWeight = "700";
        } else {
          wordCount.style.color = "var(--muted)";
          wordCount.style.fontWeight = "400";
        }
      }

      function validateUI() {
        const nameOk =
          safeTrim(document.getElementById("studentName").value).length >= 6;
        const careerOk = !!careerSel.value;
        const words = countWords(reflection.value);
        const reflectionOk = words >= 20 && words <= 80;
        const qOk = requiredAnswered();

        if (!nameOk) {
          msg.innerHTML = `Escribe tu <b>nombre completo</b> (mínimo 6 caracteres).`;
          msg.className = "msg err";
          return false;
        }
        if (!careerOk) {
          msg.innerHTML = `Selecciona tu <b>carrera técnica</b>.`;
          msg.className = "msg err";
          return false;
        }
        if (!qOk) {
          msg.innerHTML = `Contesta <b>todas</b> las preguntas del diagnóstico.`;
          msg.className = "msg err";
          return false;
        }
        if (!reflectionOk) {
          const words = countWords(reflection.value);
          if (words < 20) {
            msg.innerHTML = `Escribe una reflexión más completa (mínimo <b>20 palabras</b>).`;
          } else {
            msg.innerHTML = `Tu reflexión excede el límite (máximo <b>80 palabras</b>).`;
          }
          msg.className = "msg err";
          return false;
        }

        msg.textContent = "¡Listo! Puedes finalizar y generar tu código.";
        msg.className = "msg";
        return true;
      }

      /**************************************************************
       * RESULTADO
       **************************************************************/
      const form = document.getElementById("form");
      const result = document.getElementById("result");
      const copyBlock = document.getElementById("copyBlock");
      const kvs = document.getElementById("kvs");
      const btnCopy = document.getElementById("btnCopy");
      const btnBack = document.getElementById("btnBack");
      const btnReset = document.getElementById("btnReset");
      const copyMsg = document.getElementById("copyMsg");

      function buildPayload() {
        const name = safeTrim(document.getElementById("studentName").value);
        const career = careerSel.value;
        const groupLetter = document.getElementById("groupLetter").value;
        const group = groupLetter;

        const answers = QUESTIONS.map((q) => {
          const v =
            document.querySelector(`input[name="${q.id}"]:checked`)?.value ||
            "";
          return { id: q.id, tag: q.tag, question: q.text, answer: v };
        });

        const refl = safeTrim(reflection.value);
        const stamp = nowStamp();
        const friendlyStamp = friendlyDate();
        const rnd = randomToken(6);

        // Huella/ID: mezcla de inputs + respuestas + semilla + timestamp + aleatorio
        const signatureBase = [
          DAILY_SEED,
          name.toUpperCase(),
          career,
          group,
          JSON.stringify(answers.map((a) => a.answer)),
          refl.toLowerCase(),
          stamp,
          rnd,
        ].join("|");

        const hash = fnv1a(signatureBase);
        const completionId = `CD2-${hash}-${stamp}-${rnd}`; // ID grande y único

        // Mini-huella para que no digan "es la misma"
        const fingerprint = fnv1a(
          `${name}|${career}|${group}|${DAILY_SEED}|${rnd}`
        );

        return {
          name,
          career,
          group,
          answers,
          refl,
          stamp,
          friendlyStamp,
          rnd,
          hash,
          completionId,
          fingerprint,
        };
      }

      function renderResult(payload) {
        kvs.innerHTML = "";
        const items = [
          ["Nombre", payload.name],
          ["Carrera técnica", payload.career],
          ["Grupo", payload.group],
          ["Fecha", payload.friendlyStamp],
          ["Código de terminación", payload.completionId],
        ];
        items.forEach(([k, v]) => {
          const div = document.createElement("div");
          div.className = "kv";
          div.innerHTML = `<div class="k">${k}</div><div class="v">${v}</div>`;
          kvs.appendChild(div);
        });

        const lines = [];
        lines.push(`DIAGNÓSTICO CULTURA DIGITAL II`);
        lines.push(`Nombre: ${payload.name}`);
        lines.push(`Carrera técnica: ${payload.career}`);
        lines.push(`Grupo: ${payload.group}`);
        lines.push(`Fecha: ${payload.friendlyStamp}`);
        lines.push(`Código: ${payload.completionId}`);
        lines.push(``);
        lines.push(`Resultados (resumen):`);
        payload.answers.forEach((a, i) => {
          lines.push(`${i + 1}) [${a.tag}] ${a.answer}`);
        });
        lines.push(``);
        lines.push(`Reflexión breve:`);
        lines.push(payload.refl);

        copyBlock.textContent = lines.join("\n");
      }

      async function copyToClipboard() {
        try {
          await navigator.clipboard.writeText(copyBlock.textContent);
          copyMsg.textContent =
            "✅ Copiado. Pégalo en el Foro: Diagnóstico Cultura Digital II.";
        } catch (e) {
          copyMsg.textContent =
            "No se pudo copiar automáticamente. Selecciona el texto y cópialo manualmente.";
        }
      }

      /**************************************************************
       * EVENTOS
       **************************************************************/
      initCareers();
      initQuestions();

      reflection.addEventListener("input", () => {
        updateWordCount();
        validateUI();
      });

      form.addEventListener("change", validateUI);
      form.addEventListener("input", validateUI);

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        if (!validateUI()) return;

        const payload = buildPayload();
        renderResult(payload);

        form.style.display = "none";
        result.classList.add("show");
        copyMsg.textContent = "";
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      btnCopy.addEventListener("click", copyToClipboard);

      btnBack.addEventListener("click", () => {
        result.classList.remove("show");
        form.style.display = "grid";
        copyMsg.textContent = "";
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      btnReset.addEventListener("click", () => {
        if (!confirm("¿Seguro que deseas limpiar todo?")) return;
        form.reset();
        initCareers();
        initQuestions();
        reflection.value = "";
        updateWordCount();
        msg.textContent =
          "Completa todas las preguntas y escribe una reflexión para continuar.";
        msg.className = "msg";
        copyMsg.textContent = "";
      });

      updateWordCount();
      validateUI();
    </script>
  </body>
</html>
